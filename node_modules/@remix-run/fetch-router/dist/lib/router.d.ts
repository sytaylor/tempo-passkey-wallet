import { type Matcher, RoutePattern } from '@remix-run/route-pattern';
import { type Middleware } from './middleware.ts';
import type { RequestHandler } from './request-handler.ts';
import type { RequestMethod } from './request-methods.ts';
import { type RouteHandlers, type RouteHandler } from './route-handlers.ts';
import { type RouteMap, Route } from './route-map.ts';
type MatchData = {
    handler: RequestHandler<any>;
    method: RequestMethod | 'ANY';
    middleware: Middleware<any>[] | undefined;
};
export interface RouterOptions {
    /**
     * The default request handler that runs when no route matches.
     * Default is a 404 "Not Found" response.
     */
    defaultHandler?: RequestHandler;
    /**
     * The matcher to use for matching routes.
     * Default is a `new RegExpMatcher()`.
     */
    matcher?: Matcher<MatchData>;
    /**
     * Global middleware to run for all routes. This middleware runs on every request before any
     * routes are matched.
     */
    middleware?: Middleware[];
}
/**
 * A router maps incoming requests to route handler functions and middleware.
 */
export interface Router {
    /**
     * Fetch a response from the router.
     * @param input The request input to fetch
     * @param init The request init options
     * @returns The response from the route that matched the request
     */
    fetch(input: string | URL | Request, init?: RequestInit): Promise<Response>;
    /**
     * The number of routes in the router.
     */
    readonly size: number;
    /**
     * Add a route to the router.
     * @param method The request method to match
     * @param pattern The pattern to match
     * @param handler The request handler to invoke when the route matches
     */
    route<method extends RequestMethod | 'ANY', pattern extends string>(method: method, pattern: pattern | RoutePattern<pattern> | Route<method | 'ANY', pattern>, handler: RouteHandler<method, pattern>): void;
    /**
     * Map a route map (or route/pattern) to request handler(s).
     * @param route The route(s)/pattern to match
     * @param handler The request handler(s) to invoke when the routes match
     */
    map<route extends RouteMap | Route<RequestMethod | 'ANY', string> | RoutePattern<string> | string>(route: route, handler: [
        route
    ] extends [RouteMap] ? RouteHandlers<route> : route extends Route<infer method extends RequestMethod | 'ANY', infer source extends string> ? method extends 'ANY' ? RouteHandler<RequestMethod | 'ANY', source> : RouteHandler<method, source> : route extends RoutePattern<infer source extends string> ? RouteHandler<RequestMethod | 'ANY', source> : route extends string ? RouteHandler<RequestMethod | 'ANY', route> : never): void;
    /**
     * Map a GET route/pattern to a request handler.
     * @param route The route/pattern to match
     * @param handler The request handler to invoke when the route matches
     */
    get<pattern extends string>(route: pattern | RoutePattern<pattern> | Route<'GET' | 'ANY', pattern>, handler: RouteHandler<'GET', pattern>): void;
    /**
     * Map a HEAD route/pattern to a request handler.
     * @param route The route/pattern to match
     * @param handler The request handler to invoke when the route matches
     */
    head<pattern extends string>(route: pattern | RoutePattern<pattern> | Route<'HEAD' | 'ANY', pattern>, handler: RouteHandler<'HEAD', pattern>): void;
    /**
     * Map a POST route/pattern to a request handler.
     * @param route The route/pattern to match
     * @param handler The request handler to invoke when the route matches
     */
    post<pattern extends string>(route: pattern | RoutePattern<pattern> | Route<'POST' | 'ANY', pattern>, handler: RouteHandler<'POST', pattern>): void;
    /**
     * Map a PUT route/pattern to a request handler.
     * @param route The route/pattern to match
     * @param handler The request handler to invoke when the route matches
     */
    put<pattern extends string>(route: pattern | RoutePattern<pattern> | Route<'PUT' | 'ANY', pattern>, handler: RouteHandler<'PUT', pattern>): void;
    /**
     * Map a PATCH route/pattern to a request handler.
     * @param route The route/pattern to match
     * @param handler The request handler to invoke when the route matches
     */
    patch<pattern extends string>(route: pattern | RoutePattern<pattern> | Route<'PATCH' | 'ANY', pattern>, handler: RouteHandler<'PATCH', pattern>): void;
    /**
     * Map a DELETE route/pattern to a request handler.
     * @param route The route/pattern to match
     * @param handler The request handler to invoke when the route matches
     */
    delete<pattern extends string>(route: pattern | RoutePattern<pattern> | Route<'DELETE' | 'ANY', pattern>, handler: RouteHandler<'DELETE', pattern>): void;
    /**
     * Map a OPTIONS route/pattern to a request handler.
     * @param route The route/pattern to match
     * @param handler The request handler to invoke when the route matches
     */
    options<pattern extends string>(route: pattern | RoutePattern<pattern> | Route<'OPTIONS' | 'ANY', pattern>, handler: RouteHandler<'OPTIONS', pattern>): void;
}
/**
 * Create a new router.
 */
export declare function createRouter(options?: RouterOptions): Router;
export {};
//# sourceMappingURL=router.d.ts.map